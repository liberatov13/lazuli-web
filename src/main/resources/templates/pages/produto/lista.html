<!DOCTYPE html>
<html lang="pt-BR"
      layout:decorate="~{layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lazuli Doces | Produtos</title>

    <script type="application/javascript" th:inline="javascript">
        const paginacao = /*[[${paginacao}]]*/ "";
        const tipoProduto = /*[[${tipoProduto}]]*/ "";
    </script>

    <script th:src="@{/webjars/jquery/jquery.js}"></script>
    <script th:src="@{/js/pages/produto/lista/script.js}"></script>
</head>
<body>
    <div layout:fragment="page" id="page" class="container pt-5">
        <ul id="abas" class="nav nav-tabs">
            <li id="venda-tab" class="nav-item">
                <a id="venda-link" class="nav-link"
                   href="#" onclick="selecionaAba('venda')">
                    Produtos de Venda
                </a>
            </li>
            <li id="ingrediente-tab" class="nav-item">
                <a id="ingrediente-link" class="nav-link"
                   href="#" onclick="selecionaAba('ingrediente')">
                    Ingredientes
                </a>
            </li>
        </ul>

        <nav class="container-fluid mt-3">
            <button class="btn btn-success" onclick="cadastrarProduto()">Cadastrar</button>

            <ul class="pagination d-inline-flex float-end justify-content-end">
                <li id="primeira-pagina" class="page-item">
                    <button class="page-link" type="button" data-toggle="tooltip"
                            data-placement="bottom" title="Ir para primeira página" onclick="alteraPagina(0)">
                        &laquo;
                    </button>
                </li>

                <li id="pagina-anterior" class="page-item">
                    <button class="page-link" type="button" data-toggle="tooltip"
                            data-placement="bottom" title="Ir para página anterior"
                            onclick="alteraPagina(paginacao.number - 1)">
                        &lt;
                    </button>
                </li>

                <li id="pagina-atual" class="page-item active">
                    <button class="page-link" type="button" data-toggle="tooltip"
                            data-placement="bottom" title="Página atual">
                        &ndash;
                    </button>
                </li>

                <li id="pagina-seguinte" class="page-item">
                    <button class="page-link" type="button" data-toggle="tooltip"
                            data-placement="bottom" title="Ir para próxima página" onclick="alteraPagina(paginacao.number + 1)">
                        &gt;
                    </button>
                </li>

                <li id="ultima-pagina" class="page-item">
                    <button class="page-link" type="button" data-toggle="tooltip"
                            data-placement="bottom" title="Ir para última página" onclick="alteraPagina(paginacao.totalPages - 1)">
                        &raquo;
                    </button>
                </li>
            </ul>
        </nav>

        <!-- Tabela de Produtos para Venda -->
        <table class="table table-striped"
               th:if="${#strings.toUpperCase(tipoProduto) == 'VENDA'}">
            <thead th:replace="fragments/produto/tabela-produto::header-tabela
            (${ {
                'ID',
                'Descrição',
                'Preço de Venda',
                'Qtd. Estoque'
            } })">
            </thead>

            <tbody>
                <tr th:each="produto : ${produtos}">
                    <td th:text="${produto.idProduto}"></td>
                    <td th:text="${produto.descricaoBasica}"></td>
                    <td th:text="'R$ 2,80'"></td>
                    <td th:text="${produto.quantidadeEstoque}"></td>
                </tr>
            </tbody>
        </table>

        <!-- Tabela de Ingredientes -->
        <table class="table table-striped"
               th:if="${#strings.toUpperCase(tipoProduto) == 'INGREDIENTE'}">
            <thead th:replace="fragments/produto/tabela-produto::header-tabela
            (${ {
                'ID',
                'Descrição',
                'Marca',
                'Qtd. Estoque',
                'Custo',
                'Local Compra'
            } })">
            </thead>

            <tbody>
            <tr th:each="produto : ${produtos}">
                <td th:text="${produto.idProduto}"></td>
                <td th:text="${produto.descricaoBasica}"></td>
                <td th:text="${produto.marca != null} ? ${produto.marca.nome} : ''"></td>
                <td th:text="${produto.quantidadeEstoque} != null ? ${produto.quantidadeEstoque} : ''"></td>
                <td th:text="'R$ 5,50'"></td>
                <td th:text="'Higas'"></td>
            </tr>
            </tbody>
        </table>

    </div>
</body>
</html>
